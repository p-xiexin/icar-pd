# ICAR

### 视觉

1. 逆透视
2. 适应赛道反光
3. 帧率锁定

### 控制

1. 尝试其他控制方法（例如mpc）
2. 陀螺仪姿态角解算
3. 串口延时问题
4. 磁力计校准

### 硬件

1. 陀螺仪磁力计
2. 硬件快拆

---

## 摄像头安装位置
> 摄像头参数：
> 90帧 全局快门
> 摄像头距杆顶部6cm

**摄像头视野：**


## 调车记录

（所有记录都控制了变量唯一）

> 2023/6/21
```json
    "speedLow": 1.5,
    "speedHigh": 1.7,
    "speedAI": 1.0,
    "speedCorners": 1.4,
    "speedcoiled": 1.3,
```

1. 减小**前瞻**到130，车辆在**小连续弯道**出现了明显的晃动；增大前瞻到160，车辆在连续小弯道更加丝滑，切近路。

```json
    "Control_Mid": 160,
    "Control_Skew": 20,
    "Control_Down_set": 140,
    "Control_Up_set": 140,
    "ki_down_out_max": 25,
    "Kp_dowm": 0.0,
    "Ki_down": 0.0,
```

2. 增大**角偏环Kp**到3.4，车辆在**大圆环**的打角更为连续，但是在受到扰动的时候，会使车身的晃动幅度加大；增加`Angle_target`到0.21，即将角偏的目标范围增大，积分的惯性减小，**出弯**抖动明显减小

```json
    "Angle_Kp": 2.4,
    "Angle_Ki": 0.0,
    "dynamic_Mid_low": 150,
    "dynamic_Mid_high": 170,
    "Angle_target": 0.19,
```

3. 减小图像的**底部切行**到10，车辆在**小连续弯道**的转向更加稳定，但是在转**直角弯**的时候更加贴外线，可以考虑跟**线偏环**联合调整。

```json
    "rowCutUp": 40,
    "rowCutBottom": 20,
```

4. 去掉**线偏环Kd**（Kd = 0），车辆的转向更加均匀，但是在**出弯回正**的时候出现了很明显的振动，收敛时间变长。

```json
    "runP1": 1.5,
    "runP2": 0.0264,
    "runP3": 0.00012,
    "runP1_ai": 1.58,
    "runP2_ai": 0.0273,
    "turnP": 3.5,
    "turnD": 5.0,
```
